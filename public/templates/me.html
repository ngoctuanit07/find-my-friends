<ion-view title="Me">
    <ion-nav-buttons side="right">
        <button ng-click="logOut()" class="button button-clear icon-right ion-log-out">Logout</button>
    </ion-nav-buttons>
    <ion-content has-header="true" padding="true">

        <!------------- SHARING --------------->
        <div ng-if="(friends | filter:{status:'sharing'}:true).length > 0">
            <div class="item item-divider">
                Sharing location with
            </div>
            <div class="list">
                <a ng-repeat="friend in friends | filter:{status:'sharing'}:true"
                   class="item item-avatar item-button-right" href="#/friend/{{friend.user.id}}">
                    <img ng-src="{{friend.user.photo}}">
                    <h2>{{friend.user.name}}</h2>
                    <button class="button button-assertive"
                            ng-click="stopSharingLocation({{friend.user.id}})"
                            prevent-default>Stop</button>
                </a>
            </div>
        </div>

        <!------------- PENDING CONFIRMATION --------------->
        <div ng-if="(friends | filter:{status:'pending_confirmation'}:true).length > 0">
            <div class="item item-divider">
                Pending friendship requests
            </div>
            <div class="list">
                <a ng-repeat="friend in friends | filter:{status:'pending_confirmation'}:true"
                   class="item item-avatar item-button-right" href="#/friend/{{friend.user.id}}">
                    <img ng-src="{{friend.user.photo}}">
                    <h2>{{friend.user.name}}</h2>
                    <div class="buttons">
                        <button class="button button-balanced"
                                ng-click="acceptFriendRequest({{friend.user.id}})"
                                prevent-default>
                            <i class="ion-checkmark"></i>
                        </button>
                        <button class="button button-assertive"
                                ng-click="declineFriendRequest({{friend.user.id}})"
                                prevent-default>
                            <i class="ion-close"></i>
                        </button>
                    </div>
                </a>
            </div>
        </div>

        <!------------- NOT SHARING --------------->
        <div ng-if="(friends | filter:{status:'not_sharing'}:true).length > 0">
            <div class="item item-divider">
                Share your location with
            </div>
            <div class="list">
                <a ng-repeat="friend in friends | filter:{status:'not_sharing'}:true"
                   class="item item-avatar item-button-right" href="#/friend/{{friend.user.id}}">
                    <img ng-src="{{friend.user.photo}}">
                    <h2>{{friend.user.name}}</h2>
                    <button class="button button-positive"
                            ng-click="startSharingLocation({{friend.user.id}})"
                            prevent-default>Share</button>
                </a>
            </div>
        </div>

        <!------------- BLOCKED --------------->
        <div ng-if="(friends | filter:{status:'blocked'}:true).length > 0">
            <div class="item item-divider">
                Blocked contacts
            </div>
            <div class="list">
                <a ng-repeat="friend in friends | filter:{status:'blocked'}:true"
                   class="item item-avatar item-button-right" href="#/friend/{{friend.user.id}}">
                    <img ng-src="{{friend.user.photo}}">
                    <h2>{{friend.user.name}}</h2>
                    <button class="button button-balanced"
                            ng-click="unblockFriend({{friend.user.id}})"
                            prevent-default>Unblock</button>
                </a>
            </div>
        </div>

        <!------------- SENT REQUESTS --------------->
        <div ng-if="(friends | filter:{status:'sent_request'}:true).length > 0">
            <div class="item item-divider">
                Sent Requests
            </div>
            <div class="list">
                <a ng-repeat="friend in friends | filter:{status:'sent_request'}:true"
                   class="item item-avatar item-button-right" href="#/friend/{{friend.user.id}}">
                    <img ng-src="{{friend.user.photo}}">
                    <h2>{{friend.user.name}}</h2>
                    <button class="button button-stable" disabled
                            prevent-default>Waiting</button>
                </a>
            </div>
        </div>

    </ion-content>
</ion-view>
